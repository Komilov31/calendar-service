# HTTP-сервер «Календарь»

HTTP-сервер для работы с небольшим календарем событий.  
Реализованы CRUD-операции для событий.

## Endpoints

- **POST /create_event** — создание нового события  
- **POST /update_event** — обновление существующего события  
- **POST /delete_event** — удаление события  
- **GET /events_for_day** — получить все события на указанный день  
- **GET /events_for_week** — получить все события на указанную неделю  
- **GET /events_for_month** — получить все события на указанный месяц  


## Формат запросов

Для запросов созданния данные могут передаваться в теле запроса в формате:
- JSON (`application/json`)

Для запросов обновления данные которые нужно изменить могут передаваться в теле запроса в формате:
- JSON (`application/json`)
Ресурс который нужно обновить указывается в URL запроса в query параметрах:
- user_id
- event_id

Для удаления ресурса указывается в URL запроса в query параметрах:
- user_id
- event_id

Для всех методов GET данные могут передаваться через query параметры:
- user_id
- date

Обязательные поля для создания события:

- `user_id` — идентификатор пользователя (целое число)  
- `date` — дата события в формате `YYYY-MM-DD`  
- `text` — текстовое описание события

Также объязательные query параметры для других методов указаны выше

## Логирование

Все запросы логируются в файле logs/app.log

## Тестирование

Написаны юнит тесты для всех методов repository(работы с данными) и handler(обработчиков). Для запуска
тестов нужно в корне программым написать:

```
go test -v ./...
```

## Запуск сервиса

Для запуска сервиса склонируйте данный репозиторий. Создайте .env файл в корне программы:

```
cp .env.example .env
```
Укажите в файле .env порт на котором хотите запустить сервер.
Далее напишите:

```
docker compose up
```
## Примеры запросов

Запрос на создание события:

```
curl -X POST http://localhost:8080/create_event
-H "Content-Type: application/json"
-d '{"user_id":1,"date":"2025-08-18","text":"Встреча с командой"}'
```

```
curl -X POST http://localhost:8080/create_event
-H "Content-Type: application/json"
-d '{"user_id":1,"date":"2025-08-20","text":"Встреча с семьей"}'
```

Запрос на обновление события:

```
curl -X POST http://localhost:8080/update_event?user_id=1&event_id=1
-H "Content-Type: application/json"
-d '{"date":"2025-08-19","event":"Обновленная встреча"}'
```

Запрос на получение всех событий определенного дня:

```
curl -X GET http://localhost:8080/events_for_day?user_id=1&date=2025-08-19
```

Запрос на получение всех событий определенной недели к которому пренадлежит эта дата:

```
curl -X GET http://localhost:8080/events_for_week?user_id=1&date=2025-08-19
```

Запрос на получение всех событий определенного месяца к которому пренадлежит эта дата:

```
curl -X GET http://localhost:8080/events_for_month?user_id=1&date=2025-08-19
```

Запрос на удаление события:

```
curl -X POST http://localhost:8080/delete_event?user_id=1&event_id=1
```